# Indeedバナーナレッジ分析システム

## プロジェクト概要
- **アプリ名**: Indeedバナーナレッジ分析システム
- **目的**: Indeed広告のATOMデータとバナークリエイティブを一元管理し、AI分析により営業の差別化を図る社内システム
- **主要機能**:
  1. Indeed広告のATOMデータ（実績）とバナー画像の一元管理
  2. バナーの訴求内容・デザイン傾向のタグ付けと蓄積
  3. AIによる画像からの自動タグ付け
  4. 業種・雇用形態別のCTRトップ5バナーの分析とAI要約

## 現在の実装状況

### ✅ 完了した機能
- プロジェクト初期化（Hono + Cloudflare Pages）
- データベーススキーマ設計と実装
- **辞書マスターデータの定義と投入（ステップ3完了）**
- Gitリポジトリ設定

### 📊 データモデル

#### メインテーブル: `banner_knowledge`
| フィールド名 | データ型 | 説明 |
|------------|---------|------|
| knowledge_id | TEXT | 一意のID（主キー） |
| image_id | TEXT | ATOMの画像ID（必須・一意） |
| product_name | TEXT | プロダクト名 |
| job_title | TEXT | 職種名 |
| employment_type | TEXT | 雇用形態（辞書参照） |
| clicks | INTEGER | クリック数 |
| ctr | REAL | クリック率 |
| banner_image_key | TEXT | R2バケットの画像キー |
| banner_image_url | TEXT | 画像URL |
| visual_type | TEXT | ビジュアル種別（辞書参照） |
| main_color | TEXT | メインカラー（辞書参照） |
| atmosphere | TEXT | 雰囲気（辞書参照） |
| extracted_text | TEXT | OCR抽出テキスト（AI自動入力） |
| notes | TEXT | 補足メモ |
| created_at | DATETIME | 登録日 |
| updated_at | DATETIME | 更新日 |

#### 辞書テーブル
- `employment_types` - 雇用形態辞書（6件: 正社員、アルバイト・パート、派遣社員、契約社員、業務委託、その他）
- `areas` - エリア辞書（48件: 全国 + 47都道府県）
- `main_appeals` - メイン訴求辞書（15件: 未経験歓迎、高収入・高時給、シフト自由など）
- `visual_types` - ビジュアル種別辞書（6件: 人物写真単体/複数、イラスト、テキストのみなど）
- `main_colors` - メインカラー辞書（8件: 青系、赤オレンジ系、緑系など、hex_color付き）
- `atmospheres` - 雰囲気辞書（7件: 明るい・元気、真面目・信頼、スタイリッシュなど）

#### 中間テーブル（多対多関係）
- `banner_areas` - バナーとエリアの関連
- `banner_main_appeals` - バナーとメイン訴求の関連

### 🗄️ ストレージサービス
- **Cloudflare D1**: SQLiteベースのリレーショナルデータベース（メタデータ管理）
- **Cloudflare R2**: S3互換オブジェクトストレージ（バナー画像保存）

### 🔧 データベース管理コマンド
```bash
# ローカル開発用
npm run db:migrate:local    # マイグレーション実行（ローカル）
npm run db:seed             # 辞書マスターデータの投入
npm run db:reset            # データベースリセット（マイグレーション+シード投入）
npm run db:console:local    # SQLクエリ実行（ローカル）

# 本番環境用
npm run db:migrate:prod     # マイグレーション実行（本番）
npm run db:console:prod     # SQLクエリ実行（本番）
```

## 🚀 次の実装ステップ

### ✅ ステップ3: 辞書データの定義（完了）
- ✅ 雇用形態辞書の値定義（6件）
- ✅ エリア辞書の値定義（48件）
- ✅ メイン訴求辞書の値定義（15件）
- ✅ ビジュアル種別辞書の値定義（6件）
- ✅ メインカラー辞書の値定義（8件、hex_color付き）
- ✅ 雰囲気辞書の値定義（7件）

### ステップ4: バックエンドAPI実装
- データ登録API
- データ検索API
- CTRトップ5取得API
- 画像アップロードAPI

### ステップ5: AI統合
- 画像解析API連携（OCR）
- 自動タグ付け機能
- 分析・要約生成API

### ステップ6: フロントエンド実装
- データ登録画面
- 検索・分析画面
- レポート表示画面

## 技術スタック
- **フレームワーク**: Hono (TypeScript)
- **デプロイ**: Cloudflare Pages + Workers
- **データベース**: Cloudflare D1 (SQLite)
- **ストレージ**: Cloudflare R2
- **フロントエンド**: HTML + TailwindCSS + JavaScript
- **バージョン管理**: Git

## デプロイ状況
- **ステータス**: 開発中（データモデル・辞書データ定義完了）
- **最終更新**: 2025-10-29

## 📋 辞書マスターデータ詳細

### 1. 雇用形態辞書（6件）
| コード | 名称 |
|--------|------|
| fulltime | 正社員 |
| parttime | アルバイト・パート |
| dispatch | 派遣社員 |
| contract | 契約社員 |
| commission | 業務委託 |
| other | その他 |

### 2. エリア辞書（48件）
全国 + 47都道府県（北海道〜沖縄県）

### 3. メイン訴求辞書（15件）
未経験歓迎、高収入・高時給、シフト自由・選べる、Wワーク・副業OK、リモートワーク・在宅OK、駅チカ・通勤便利、主婦・主夫歓迎、シニア活躍中、ミドル活躍中、オープニングスタッフ、資格取得支援、土日祝休み、正社員登用あり、髪色・服装自由、短時間・短期OK

### 4. ビジュアル種別辞書（6件）
人物写真（単体）、人物写真（複数）、イラスト、テキストのみ、商品・風景写真、その他

### 5. メインカラー辞書（8件）
| コード | 名称 | カラーコード |
|--------|------|-------------|
| blue | 青系 | #0066CC |
| red_orange | 赤・オレンジ系 | #FF6600 |
| green | 緑系 | #00AA44 |
| yellow | 黄系 | #FFD700 |
| purple | 紫系 | #9933CC |
| pink | ピンク系 | #FF66AA |
| black | モノクロ・黒 | #333333 |
| white_colorful | 白ベース・カラフル | #FFFFFF |

### 6. 雰囲気辞書（7件）
明るい・元気、真面目・信頼・プロフェッショナル、スタイリッシュ・先進的、優しい・安心・温かい、クール・かっこいい、シニア向け・落ち着いた、インパクト重視
